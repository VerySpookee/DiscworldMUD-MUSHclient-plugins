<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Thursday, August 04, 2022, 8:19 AM -->
<!-- MuClient version 5.06 -->

<!-- Plugin "MockDuration" generated by Plugin Wizard -->

<muclient>
<plugin
   name="MockDuration"
   author="Spookee"
   id="d466cd36598b25da809ea997"
   language="Lua"
   purpose="Measures the duration of witch mockery"
   date_written="2022-08-04 08:16:11"
   requires="5.06"
   version="1.0"
   >
<description trim="y">
<![CDATA[
This plugin will trigger upon detecting messages related to the start and end of a witches mockery squint buff and highlight the corresponding lines.
The measured duration is output to the console.
Nothing is sent to the world so this will not fall foul of Discworld MUDs Automation rules.
If you find anything is broken please let Spookee know how to fix it and I'll do my best.
]]>
</description>

</plugin>

<!--  Triggers  -->

<triggers>
  <trigger
   custom_colour="17"
   enabled="y"
   group="Highlighted Words"
   ignore_case="y"
   keep_evaluating="y"
   match="\b\w+\'s cruel mockery makes you try even harder\.\B"
   regexp="y"
   repeat="y"
   send_to="12"
   sequence="90"
   other_text_colour="aquamarine"
  >
  <send>mockstarttime = os.time(mocktime)
print("Mockery buff applied")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="Highlighted Words"
   ignore_case="y"
   keep_evaluating="y"
   match="\bthe sting of \w+'s mockery wears off.\B"
   regexp="y"
   repeat="y"
   send_to="12"
   sequence="90"
   other_text_colour="aquamarine"
  >
  <send>mockendtime = os.time(mocktime)
print("Mockery has worn off")
imockduration = os.difftime(mockendtime, mockstarttime)
imockminutes = math.floor(imockduration / 60)
imockseconds = imockduration % 60
print("Duration was: ",imockminutes,"minutes ",imockseconds," seconds")</send>
  </trigger>
</triggers>

<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="MockDuration:help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end
]]>
</script> 

</muclient>
