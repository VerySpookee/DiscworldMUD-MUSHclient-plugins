<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Saturday, June 04, 2022, 2:17 PM -->
<!-- MuClient version 5.06 -->

<!-- Plugin "BlinkDuration" generated by Plugin Wizard -->

<!--
testtime is just used because os.time needs an input
starttime holds the beginning timestamp
endtime holds the finishing timestamp
iduration holds the duration in seconds
iminutes and iseconds hold the individual components of the finish time so they can be output to the user.
-->

<muclient>
<plugin
   name="BlinkDuration"
   author="Spookee"
   id="03130d3b4eb0ebe593e7b14d"
   language="Lua"
   purpose="Measures the duration of the blink squint method buff"
   date_written="2022-06-04 14:09:20"
   requires="5.06"
   version="1.0"
   >
<description trim="y">
<![CDATA[
This plugin will trigger upon detecting messages related to the start and end of the blink squint buff and highlight the corresponding lines.
The measured duration is output to the console.
Nothing is sent to the world so this will not fall foul of Discworld MUDs Automation rules.
If you find anything is broken please let Spookee know how to fix it and I'll do my best.
]]>
</description>

</plugin>


<!--  Triggers  -->

<triggers>
  <trigger
   custom_colour="17"
   enabled="y"
   group="Highlighted Words"
   ignore_case="y"
   keep_evaluating="y"
   match="\bPeering into .+ eyes, you get the sudden impression you can do anything\!"
   regexp="y"
   repeat="y"
   send_to="12"
   sequence="90"
   other_text_colour="aquamarine"
  >
  <send>starttime = os.time(testtime)
print("Blink squint detected")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="Highlighted Words"
   ignore_case="y"
   keep_evaluating="y"
   match="\bThe sensation of being able to do anything finally leaves you\."
   regexp="y"
   repeat="y"
   send_to="12"
   sequence="90"
   other_text_colour="aquamarine"
  >
  <send>endtime = os.time(testtime)
print("End of Blink squint detected")
iduration = os.difftime(endtime, starttime)
iminutes = math.floor(iduration / 60)
iseconds = iduration % 60
print("Duration was: ",iminutes,"minutes ",iseconds," seconds")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="Highlighted Words"
   ignore_case="y"
   keep_evaluating="y"
   match=".+beginning to doubt your abilities again\b"
   regexp="y"
   repeat="y"
   sequence="90"
   other_text_colour="aquamarine"
  >
  </trigger>
</triggers>

<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="BlinkDuration:help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end
]]>
</script> 

</muclient>
